<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<title>Ejercicios de comunicación entre objetos (2 puntos en total)</title>
	</head>
<body>
<h2>Ejercicios de comunicación entre objetos (2 puntos en total)</h2>

<ul>
	<li>En las plantillas de la sesión hay un proyecto de Xcode llamado “Comunicación”. Se trata de un conversor entre euros y dólares que actualiza el tipo de cambio en tiempo real (lo debería actualizar de la red, pero lo que hace es calcular un valor aleatorio cada 5 segundos)</li>
	<li>Si escribimos por ejemplo una cantidad en euros y pulsamos el botón “obtener” que hay al lado del campo para los dólares, veremos la cantidad en dólares (y viceversa).</li>
	<li><p>El problema es que aunque el cálculo se hace con la cotización actual, la etiqueta con la cotización (“1€=…$”) no se actualiza automáticamente cada vez que cambie esta. Tenemos que solucionarlo</p>

		<ul>
			<li>El <em>outlet</em> que nos da acceso a la etiqueta se llama <code>tipoCambioLabel</code>, definido en <code>ViewController.h</code></li>
			<li>El conversor está definido como una variable de instancia del mismo nombre en <code>ViewController.m</code></li>
			<li>Cada 5 segundos se dispara un “timer” que llama al método <code>actualizarTipoDeCambio</code> del conversor. Este método a su vez cambia el valor de la propiedad <code>unEuroEnUSD</code>.</li>
		</ul></li>
	<li><strong>Implementar una primera versión usando KVO <em>(1 punto)</em></strong>, de modo que el View Controller se registre como observador de la propiedad <code>unEuroEnUSD</code>. Cada vez que cambie se debería actualizar la etiqueta para reflejar el tipo de cambio actual.</li>
	<li><p>Para generar el texto de la etiqueta a partir del valor de cambio podéis usar el <code>stringWithFormat</code>, que funciona al estilo <code>printf</code> de C:</p>

		<pre><code>self.tipoCambioLabel.text = 
		  [NSString stringWithFormat:@&quot;1 € = %1.3f $&quot;,
						conversor.unEuroEnUSD];
		</code></pre></li>
	<li><p><strong>Implementar otra versión con notificaciones: <em>(1 punto)</em></strong> </p>

		<ul>
			<li>Primero comentad la línea del ejercicio anterior que actualiza la etiqueta en pantalla, ya que ahora la vamos a actualizarla con notificaciones</li>
			<li>Desde el método <code>actualizarTipoDeCambio</code> se debe enviar una notificación (dadle el nombre que queráis) y el View Controller debería suscribirse a ellas para poder actualizar la etiqueta en pantalla. </li>
		</ul></li>
</ul>

</body>
</html>

